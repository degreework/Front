{% extends 'template_base.html' %}
{% block contenido %}
	<div class="col-md-10 col-md-offset-1 capacity">
		{% include 'nav_foro.html' %}

		<div class="row">
			<h3 class="ask_title titulos"></h3>
			
			<div class="col-md-9 col-md-offset-1">
			
				<div class="ask_summary"></div>
				<a class="ask_author_link"><span class="ask_author"></span></a>
				<span class="ask_added_at pull-right"></span>
				
			</div>		
		</div>
		<hr>
		<div class="row">
			<div id="list-comment" class="col-md-9 col-md-offset-2">

				<a class="btn-create" id="a-comment">agrega un comentario</a>
				<div>
					<form id="form-comment" hidden>
						<button id="btn-comment" class="btn btn-default pull-right" type="submit" name="action">Comentar</button>
					</form>	
				</div>
			</div>
			
		</div>
		
		<div class="row">
			<h3 class="titulos">Tu respuesta</h3>

			<div class="col-md-8 col-sm-8 col-xs-8 col-sm-offset-2">
				<form class="" id="form_answer_foro">
					<div id="editor">
	                </div>
	                <br>
		      		<button class="btn btn-default pull-right" type="submit" name="action">Responder</button>
		      	</form>
			</div>

			
		</div>
		


		<div class="row">
			<h3 class="titulos">Respuestas</h3>
			<hr>
			<div class="answer"></div>
		</div>
		

	</div>
	
{% endblock %}
{% block scripts %}
{% load staticfiles %}
	<script src="//cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
<link href="{% static 'libs/bootstrap-markdown-editor/dist/css/bootstrap-markdown-editor.css' %}" rel="stylesheet">
<script src="{% static 'libs/marked/marked.min.js' %}"></script>
<script src="{% static 'libs/bootstrap-markdown-editor/dist/js/bootstrap-markdown-editor.js' %}"></script>

	<script type="text/javascript">
		ForumService.get_Detail_Ask();
		ForumService.get_Answers();
		ForumService.get_Comments();
		// ::::FORO ::::
		//form Answer from Ask  at Foro
		form_answer_foro = $("#form_answer_foro");
		//create_form(URL_CREATE_ANSWER_FORO, form_answer_foro, 'OPTIONS');
		form_answer_foro.submit(function (e) {
			e.preventDefault();
			ForumService.create_answer(form_answer_foro, URL_CREATE_ANSWER_FORO);
		})


		//comments
		form_comment_ask = $("#form-comment");
		create_form(URL_CREATE_COMMENT, form_comment_ask, 'OPTIONS');
		form_comment_ask.submit(function (e) {
			e.preventDefault();
			CommentService.create(form_comment_ask, URL_CREATE_COMMENT, ForumService.append_comment_to_ask);
		})

		$("#a-comment").click(function (e) {
			e.preventDefault()
			$("#a-comment").hide()
			$("#form-comment").show()
		})
	</script>
	<script>
            jQuery(document).ready(function($) {
				//$("#form_answer_foro input").hide()
                $('#editor').markdownEditor({
                    preview: true,
                    onPreview: function (content, callback) {
                        callback( marked(content) );
                    }
                });

            });
	</script>
{% endblock scripts %}